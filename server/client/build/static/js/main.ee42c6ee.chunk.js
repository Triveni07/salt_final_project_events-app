(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1000:function(e,t,a){},1002:function(e,t,a){},1004:function(e,t,a){},1007:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(45),l=a.n(r),i=(a(462),a(1008)),o=a(1009),s=a(1010),u=(a(465),a(9)),d=a(10),m=a(13),f=a(11),p=a(12),v=a(3),h=a(55),b=a(94),g=a.n(b),E=a(376),y=a.n(E),O=function(){},j=function(e){return c.a.createElement(y.a,{appId:"827178304339896",autoLoad:!1,fields:"name,email,picture",size:"small",onClick:O,callback:function(t){return function(e,t){t({user_name:e.name,user_ID:e.userID,access_Token:e.accessToken})}(t,e.login)}})},k=a(377),N=a.n(k),C=a(19),M=a.n(C),S=function(e,t){M.a.post("/api/user/login",{platform:"google",token:e.accessToken,ignoreCookie:JSON.parse(localStorage.getItem("ignoreCookie"))}).then(function(e){t.closeModal(),t.login(e.data)})},w=function(e){return c.a.createElement(N.a,{clientId:"578734164648-rsbnudtce90t2v1at6nmajmq9qbd7jjq.apps.googleusercontent.com",buttonText:"Login with Google",onSuccess:function(t){return S(t,e)},onFailure:S})};a(485);var x=Object(h.withStyles)(function(e){return{paper:{position:"absolute",width:50*e.spacing.unit,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:4*e.spacing.unit}}})(function(e){var t=e.classes,a=e.showModal,n=e.onClose,r=e.login,l=e.closeModal;return c.a.createElement("div",null,c.a.createElement(g.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:a,onClose:n,onClick:function(e){e.target.classList.contains("login-modal")||l()}},c.a.createElement("div",{style:{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")},className:"".concat(t.paper," login-modal")},c.a.createElement(j,{login:r}),c.a.createElement(w,{closeModal:l,login:r}))))}),I=(a(567),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={showModal:!1},a.closeModal=a.closeModal.bind(Object(v.a)(Object(v.a)(a))),a.handleOpen=a.handleOpen.bind(Object(v.a)(Object(v.a)(a))),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"handleOpen",value:function(){this.setState({showModal:!0})}},{key:"closeModal",value:function(){this.setState({showModal:!1})}},{key:"render",value:function(){var e=this.state.showModal,t=this.props,a=t.login,n=t.logout,r=t.isLoggedIn,l=t.userName,i=t.navigate,o="nav-btn",s="nav-btn",u="nav-btn";switch(t.history.location.pathname){case"/":o+=" nav-btn--selected";break;case"/create":s+=" nav-btn--selected";break;case"/myevents":u+=" nav-btn--selected"}return c.a.createElement("div",{className:"navbar"},c.a.createElement("h1",{className:"logo"},"Chimera Events"),c.a.createElement("div",{className:"navbar-links"},c.a.createElement("button",{className:o,type:"button",onClick:function(){return i("/")}},c.a.createElement("i",{className:"fas fa-th-large"}),"Public Events"),r&&c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{className:u,type:"button",onClick:function(){return i("/myevents")}},c.a.createElement("i",{className:"fas fa-user"}),"My Events"),c.a.createElement("button",{className:s,type:"button",onClick:function(){return i("/create")}},c.a.createElement("i",{className:"fas fa-plus"}),"Create Event"))),c.a.createElement("div",{className:"login-area"},r&&c.a.createElement("h4",{className:"user-name"},c.a.createElement("i",{className:"fas fa-user"}),l),r?c.a.createElement("button",{className:"logout-btn",type:"button",color:"secondary",onClick:n},"Logout"):c.a.createElement("button",{className:"login-btn nav-btn--selected nav-btn",type:"button",onClick:this.handleOpen},"Login")),c.a.createElement(x,{showModal:e,login:a,closeModal:this.closeModal}))}}]),t}(n.Component)),D=a(16),L=a(156),A=a(76),q=a.n(A),F=a(61),T=a.n(F),_=a(231),P=a(116),U=Object(_.a)(Object(_.b)({googleMapURL:"https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry,drawing,places&key=AIzaSyCW83YC217OdmY33WAmZqeFGr9DiCfbKAw",loadingElement:c.a.createElement("div",{style:{height:"100%",width:"100%"}}),containerElement:c.a.createElement("div",{style:{height:"100%",width:"100%"}}),mapElement:c.a.createElement("div",{style:{height:"100%",width:"100%"}})}),P.withScriptjs,P.withGoogleMap)(function(e){var t,a=e.locations;return t=a[0].lat&&a[0].lng?{lat:a[0].lat,lng:a[0].lng}:{lat:59.3318,lng:18.0634},c.a.createElement(P.GoogleMap,{defaultCenter:Object(D.a)({},t),defaultZoom:14},a.map(function(e){var t=e.lat,a=e.lng;return t&&a?c.a.createElement(P.Marker,{key:Math.floor(Math.random()*Date.now()),position:{lat:t,lng:a}}):c.a.createElement(c.a.Fragment,null)}))}),K=a(36),W=function(e){function t(e){var a;Object(u.a)(this,t);var n=(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).props,c=n.userIsAttending,r=n.id;return a.state={userIsAttending:c,id:r},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"attendEvent",value:function(){this.setState(function(e){return Object(D.a)({},e,{userIsAttending:!e.userIsAttending})});var e=this.state.id;M.a.post("/api/event/public/attend/".concat(e)).then(function(e){return console.log(e)}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this,t=this.state.userIsAttending;return c.a.createElement(c.a.Fragment,null,t?c.a.createElement(K.a,{variant:"contained",color:"secondary",onClick:function(){return e.attendEvent()}},"Unattend"):c.a.createElement(K.a,{variant:"contained",color:"primary",onClick:function(){return e.attendEvent()}},"Attend"))}}]),t}(n.Component),B=(a(816),function(e){function t(e){var a;Object(u.a)(this,t);var n=(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).props,c=n.closeModal,r=n.user;return a.close=function(){c(),r.updateCredentials()},a.handleClick=a.handleClick.bind(Object(v.a)(Object(v.a)(a))),a.handleKeyDown=a.handleKeyDown.bind(Object(v.a)(Object(v.a)(a))),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"handleClick",value:function(e){e.target.classList.contains("modal-bg")&&this.close()}},{key:"handleKeyDown",value:function(e){"Escape"===e.key&&this.close()}},{key:"render",value:function(){var e=this.props,t=e.event,a=e.user.credentials.events.attending.includes(t._id),n=t.location.coordinates,r={lat:Number(n.lat),lng:Number(n.lng)},l="N/A",i="N/A";return t.date.start?(l=q()(t.date.start).format("MMM DD"),i=q()(t.date.start).format("hh:mm")):t.date.dateString&&(l=t.date.dateString),c.a.createElement("div",{className:"modal-bg",onClick:this.handleClick},c.a.createElement("div",{className:"modal-container"},t.picture?c.a.createElement("div",{className:"event-image",style:{backgroundImage:"url(".concat(t.picture,")")}},c.a.createElement("div",{className:"event-profile-picture"})):c.a.createElement("div",{className:"event-image"},c.a.createElement("h2",{className:"modal-event-title"},t.title),c.a.createElement("div",{className:"event-profile-picture"})),c.a.createElement("div",{className:"modal-info"},c.a.createElement("div",{className:"modal-info-details"},c.a.createElement("div",{className:"modal-info-detail"},c.a.createElement("i",{className:"fas fa-user"}),c.a.createElement("h4",null,t.createdBy.name),c.a.createElement("span",{className:"info-label"},"Organizer")),c.a.createElement("div",{className:"modal-info-detail"},c.a.createElement("i",{className:"fas fa-bookmark"}),c.a.createElement("h4",null,t.category),c.a.createElement("span",{className:"info-label"},"Category")),c.a.createElement("div",{className:"modal-info-detail"},c.a.createElement("i",{className:"fas fa-map-marker-alt"}),c.a.createElement("h4",null,t.location.address),c.a.createElement("span",{className:"info-label"},"Location")),c.a.createElement("div",{className:"modal-info-detail"},c.a.createElement("i",{className:"fas fa-calendar"}),c.a.createElement("h4",null,l),c.a.createElement("span",{className:"info-label"},"Date")),c.a.createElement("div",{className:"modal-info-detail"},c.a.createElement("i",{className:"fas fa-clock"}),c.a.createElement("h4",null,i),c.a.createElement("span",{className:"info-label"},"Time")),c.a.createElement("div",{className:"modal-info-detail"},c.a.createElement("i",{className:"fas fa-users"}),c.a.createElement("h4",null,t.attending.length),c.a.createElement("span",{className:"info-label"},"Attending")),c.a.createElement("div",{className:"modal-info-detail"},c.a.createElement("i",{className:"fas fa-align-left"}),c.a.createElement("h4",null,t.description),c.a.createElement("span",{className:"info-label"},"Description"))),c.a.createElement("div",{className:"modal-map"},c.a.createElement(U,{locations:[r]})),c.a.createElement("div",{className:"event-actions"},c.a.createElement("div",{className:"event-actions"},c.a.createElement(T.a,{variant:"contained",onClick:this.close},"Close"),c.a.createElement(W,{userIsAttending:a,id:t._id}))))))}}]),t}(n.Component)),R=(a(818),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={expanded:!1},a.closeModal=a.closeModal.bind(Object(v.a)(Object(v.a)(a))),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"attendEvent",value:function(e){this.props.user.updateEvent(e),M.a.post("/api/event/public/attend/".concat(e)).then(function(e){return console.log(e)}).catch(function(e){return console.log(e)})}},{key:"expanded",value:function(){var e=this.props,t=e.event,a=e.user,n=a.credentials.events.attending.includes(t._id);a.credentials.events.created.includes(t._id);return c.a.createElement("div",{className:"event-info event-info--expanded"},c.a.createElement("h4",{className:"event-info-category"},t.category),c.a.createElement("h1",{className:"event-info-title"},t.title),c.a.createElement("p",{className:"event-info-description"},t.description),c.a.createElement("h4",null,t.date.start),c.a.createElement(EventAction,{userIsAttending:n,eventId:t._id}))}},{key:"contracted",value:function(){var e=this,t=this.props.event,a=t.date.start;if("Stockholm Stad"!==t.createdBy.name&&t.date.start)a=q()(t.date.start).format("MMM DD"),window.date=a;else if(t.date.dateString){var n=t.date.dateString.split("-");a=Object(L.a)(n,1)[0]}return c.a.createElement("div",{onClick:function(){return e.setState(function(e){return{expanded:!e.expanded}})}},t.picture?c.a.createElement("div",{className:"event-image",style:{backgroundImage:"url(".concat(t.picture,")")}},c.a.createElement("div",{className:"event-profile-picture"})):c.a.createElement("div",{className:"event-image"},c.a.createElement("div",{className:"event-profile-picture"})),c.a.createElement("div",{className:"event-info event-info--contracted"},c.a.createElement("h4",{className:"event-info-category"},c.a.createElement("i",{className:"fas fa-bookmark"}),t.category,c.a.createElement("i",{className:"fas fa-users"}),t.attending?t.attending.length:"0",c.a.createElement("i",{className:"fas fa-calendar"}),a),c.a.createElement("h1",{className:"event-info-title"},t.title)))}},{key:"closeModal",value:function(){this.setState({expanded:!1})}},{key:"render",value:function(){var e=this.props,t=e.event,a=e.user,n=this.state.expanded,r="event-card category-".concat(t.category," ").concat(n?"event-card--expanded":"event-card--contracted");return c.a.createElement("div",{className:r,key:Math.random()},n&&c.a.createElement(B,{event:t,closeModal:this.closeModal,user:a}),this.contracted())}}]),t}(n.Component)),J=(a(820),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={category:"ALL"},a.executeCallback=a.executeCallback.bind(Object(v.a)(Object(v.a)(a))),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"executeCallback",value:function(e){var t=this.props.callback,a=e.target.innerText.replace(/\n/,"").trim();this.setState({category:a}),t("ALL"===a?"":a)}},{key:"render",value:function(){var e=this,t=this.state.category;return c.a.createElement("div",{className:"category-filters"},["ALL","STOCKHOLM","PARTY","MUSIC","FAMILY","MAP"].map(function(a){return a===t?c.a.createElement("button",{type:"button",className:"btn-style btn-".concat(a),key:Math.random(),variant:"contained",color:"primary",onClick:e.executeCallback},a):c.a.createElement("button",{className:"btn-style",type:"button",key:Math.random(),onClick:e.executeCallback},a)}))}}]),t}(n.Component)),z=c.a.createContext(),G=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={isLoggedIn:!1,ignoreCookie:JSON.parse(localStorage.getItem("ignoreCookie")),credentials:{userName:"",events:{attending:[]},friends:{incoming:[],outgoing:[],accepted:[]}},login:a.login.bind(Object(v.a)(Object(v.a)(a))),logout:a.logout.bind(Object(v.a)(Object(v.a)(a))),updateEvent:a.updateEvent.bind(Object(v.a)(Object(v.a)(a))),updateCredentials:a.updateCredentials.bind(Object(v.a)(Object(v.a)(a)))},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.ignoreCookie;document.cookie.includes("chimera_cookie")&&!t&&M.a.get("/api/user/me").then(function(t){return e.login(t.data)})}},{key:"updateCredentials",value:function(){var e=this;M.a.get("/api/user/me").then(function(t){t.data&&e.setState(function(e){return Object(D.a)({},e,{credentials:t.data})})}).catch(function(){return console.log("user not logged in")})}},{key:"updateEvent",value:function(e){var t=this.state.credentials.events.attending;t.includes(e)?t=t.filter(function(t){return t!==e}):t.push(e),this.setState(function(e){return Object(D.a)({},e,{credentials:Object(D.a)({},e.credentials,{events:Object(D.a)({},e.credentials.events,{attending:t})})})})}},{key:"login",value:function(e){localStorage.setItem("ignoreCookie","false"),this.setState({isLoggedIn:!0,credentials:e,ignoreCookie:!1})}},{key:"logout",value:function(){localStorage.setItem("ignoreCookie","true"),this.setState(function(e){return Object(D.a)({},e,{isLoggedIn:!1,ignoreCookie:!0})})}},{key:"render",value:function(){var e=this.props,t=e.history,a=e.children,n=this.state.isLoggedIn,r=t.location.pathname;return!n&&["/create"].includes(r)&&t.push("/"),c.a.createElement(z.Provider,{value:this.state},a)}}]),t}(n.Component),H=(a(822),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={events:[],category:""},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.category;M.a.get("/api/event/public".concat(t)).then(function(t){return e.setState(function(e){return Object(D.a)({},e,{events:t.data})})})}},{key:"render",value:function(){var e=this,t=this.state.events,a=this.state.category,n=t.map(function(e){return e.location.coordinates}).map(function(e){return{lng:Number(e.lng),lat:Number(e.lat)}});return a&&(t=t.filter(function(e){return e.category.toUpperCase()===a})),c.a.createElement("div",{className:"container"},c.a.createElement(J,{callback:function(t){return e.setState(function(e){return Object(D.a)({},e,{category:t})})}}),c.a.createElement("div",{className:"public-events"},t.map(function(e){return c.a.createElement(z.Consumer,{key:e._id},function(t){return c.a.createElement(R,{event:e,user:t})})}),"MAP"===a&&c.a.createElement("span",{className:"public-map"},c.a.createElement(U,{locations:n}))))}}]),t}(n.Component)),Y=a(96),Z=a(229),V=a.n(Z),Q=a(379),X=a.n(Q),$=a(230),ee=(a(873),function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=X()({appId:$.placesAppId,apiKey:$.placesAppKey,container:document.querySelector("#address-input"),countries:["se"],type:"address"}),t=this.props.onChange;e.on("change",function(e){t(e.suggestion)},50)}},{key:"render",value:function(){return c.a.createElement("input",{type:"search",id:"address-input",placeholder:"Event address"})}}]),t}(n.Component)),te=(a(875),a(37)),ae=a.n(te),ne=ae.a.object().keys({start:ae.a.date().required(),end:ae.a.date()}),ce=ae.a.object().keys({address:ae.a.string().min(3).max(20).required(),zip:ae.a.string().regex(/[\d]{3}\s[\d]{2}/),coordinates:ae.a.object().keys({x:ae.a.number(),y:ae.a.number()})}),re=ae.a.object().keys({category:ae.a.string().min(2).max(20).required(),date:ne,description:ae.a.string().min(10).max(400).required(),location:ce,title:ae.a.string().min(5).max(30).required(),public:ae.a.boolean().required()}),le=function(e){return ae.a.validate(e,re)};var ie=function(e,t,a){var n=e.target,c=n.querySelector("#title").value,r=n.querySelector("#description").value,l=n.querySelector("#category").value,i={start:n.querySelector("#start-date").value,end:n.querySelector("#end-date").value},o={address:t.name,coordinates:{lat:t.latlng.lat,lng:t.latlng.lng}},s=n.querySelector("#event-type").checked;console.log("sending picture: ",a);var u={title:c,description:r,category:l,date:i,location:o,picture:a,public:s};le(u)&&(console.log(u),M.a.post("/api/event/create",Object(D.a)({},u)).then(function(){console.log("New event created")}).catch(function(e){console.log("Error:",e)}))},oe=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={category:"Party",labels:{title:"Title",description:"Description"},errors:{title:!1,description:!1},location:{},image:"https://images.unsplash.com/photo-1505236858219-8359eb29e329?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=d14a810136c7528ba19f04ff77b8130d&auto=format&f"},a.updateSelect=a.updateSelect.bind(Object(v.a)(Object(v.a)(a))),a.fileUpload=a.fileUpload.bind(Object(v.a)(Object(v.a)(a))),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=new V.a({targetSize:.2,quality:.75,maxWidth:800,maxHeight:600});document.getElementById("upload").addEventListener("change",function(a){var n=Object(Y.a)(a.target.files);t.compress(n).then(function(t){var a=t[0].photo;V.a.blobToBase64(a.data).then(function(t){return e.fileUpload({base64:t.toString()})})})},!1)}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.props.history,a=this.state,n=a.location,c=a.image;ie(e,n,c),t.push("/")}},{key:"updateSelect",value:function(e){var t=e.currentTarget.getAttribute("data-value");this.setState(function(e){return Object(D.a)({},e,{category:t})})}},{key:"fileUpload",value:function(e){var t=e.base64;this.setState(function(e){return Object(D.a)({},e,{image:t})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.category,n=t.errors,r=t.labels,l=t.image,i="url(".concat(l,")"),o=function(e){var t=new Date(Date.now()+864e5*e).toISOString().split(/:[\d.]+Z/);return Object(L.a)(t,1)[0]},s=o(7),u=o(7);return c.a.createElement("div",{className:"cre-bg"},c.a.createElement("div",{className:"cre-modal"},c.a.createElement("div",{className:"cre-modal-container"},c.a.createElement("form",{className:"cre-form",onSubmit:function(t){return e.handleSubmit(t)}},c.a.createElement("div",{className:"file-upload",style:{backgroundImage:i}},c.a.createElement("input",{type:"file",id:"upload"}),"https://images.unsplash.com/photo-1505236858219-8359eb29e329?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=d14a810136c7528ba19f04ff77b8130d&auto=format&f"===l&&c.a.createElement("div",{className:"file-upload-cta"},c.a.createElement("i",{className:"fas fa-camera-retro"}))),c.a.createElement(K.f,{fullWidth:!0,className:"cre-setting",label:r.title,variant:"outlined",id:"title",error:n.title,onSelect:function(t){var a=t.target.value.length,c=a<4,l=a>20,i=c||l,o="Title";c?o="Too short":l&&(o="Too long"),n.title=i,r.title=o,e.setState(function(e){return Object(D.a)({},e,{errors:n,labels:r})})},required:!0}),c.a.createElement("br",null),c.a.createElement(K.e,{id:"category",className:"cre-setting",value:a,onChange:this.updateSelect},c.a.createElement(K.d,{value:"Party"},"Party"),c.a.createElement(K.d,{value:"Music"},"Music"),c.a.createElement(K.d,{value:"Family"},"Family")),c.a.createElement("br",null),c.a.createElement(K.f,{required:!0,id:"start-date",label:"Start date",type:"datetime-local",defaultValue:s,className:"textField",InputLabelProps:{shrink:!0}}),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(K.f,{required:!0,id:"end-date",label:"End date",type:"datetime-local",defaultValue:u,className:"textField",InputLabelProps:{shrink:!0}}),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(ee,{onChange:function(t){return e.setState(function(e){return Object(D.a)({},e,{location:t})})}}),c.a.createElement("br",null),c.a.createElement(K.f,{fullWidth:!0,className:"cre-setting",label:r.description,variant:"outlined",id:"description",error:n.description,onSelect:function(t){var a=t.target.value.length,c=a<10,l=a>400,i=c||l,o="Description";c?o="Too short":l&&(o="Too long"),n.description=i,r.description=o,e.setState(function(e){return Object(D.a)({},e,{errors:n,labels:r})})},required:!0,multiline:!0}),c.a.createElement("br",null),c.a.createElement(K.c,{control:c.a.createElement(K.b,{id:"event-type"}),label:"Public"}),c.a.createElement(K.c,{control:c.a.createElement(K.b,{id:"event-type"}),label:"Invite all my friends",checked:!0,disabled:!0}),c.a.createElement("br",null),c.a.createElement("div",{className:"align-right"},c.a.createElement(K.a,{variant:"extendedFab",color:"primary",type:"submit"},"Create Event"))))))}}]),t}(n.Component),se=(a(996),a(998),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={collapsed:!1},a.toggleList=a.toggleList.bind(Object(v.a)(Object(v.a)(a))),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"toggleList",value:function(){var e=this.state.collapsed;this.setState({collapsed:!e})}},{key:"render",value:function(){var e=this.props,t=e.children,a=e.title,n=e.length,r=this.state.collapsed;return c.a.createElement("div",{className:"event-list ".concat(r&&"event-list--collapsed")},c.a.createElement("header",{className:"event-list-header",onClick:this.toggleList},c.a.createElement("h4",null,a," (",n,")"),c.a.createElement("i",{className:"fas arrow fa-angle-down"})),c.a.createElement("div",{className:"event-list-events"},t))}}]),t}(n.Component)),ue=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={expanded:!1},a.closeModal=a.closeModal.bind(Object(v.a)(Object(v.a)(a))),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"closeModal",value:function(){this.setState({expanded:!1})}},{key:"contracted",value:function(){var e=this,t=this.props.event,a="N/A";return t.date.start?a=q()(t.date.start).format("MMM DD"):t.date.dateString&&(a=t.date.dateString),c.a.createElement(c.a.Fragment,null,c.a.createElement("h4",{className:"event-info-title"},t.title),c.a.createElement("h4",null,a),c.a.createElement(T.a,{variant:"contained",color:"primary",onClick:function(){return e.setState({expanded:!0})}},"View"))}},{key:"render",value:function(){var e=this.props,t=e.event,a=e.user,n=this.state.expanded,r="event-card event-card--compact category-".concat(t.category);return c.a.createElement("div",{className:r,key:Math.random()},n&&c.a.createElement(B,{event:t,closeModal:this.closeModal,user:a}),this.contracted())}}]),t}(n.Component),de=(a(1e3),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={users:[],query:""},a.handleChange=a.handleChange.bind(Object(v.a)(Object(v.a)(a))),a.handleClick=a.handleClick.bind(Object(v.a)(Object(v.a)(a))),a.inputRef=Object(n.createRef)(),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;M.a.get("/api/user").then(function(t){return e.setState(function(e){return Object(D.a)({},e,{users:t.data})})})}},{key:"filterUsers",value:function(e){var t=this,a=this.props.user,n=this.state.query,c=a.credentials.friends,r=Object(Y.a)(c.accepted).concat(Object(Y.a)(c.incoming),Object(Y.a)(c.outgoing));return e.filter(function(e){return e._id!==a.credentials._id}).filter(function(e){return e.userName.toLowerCase().trim().startsWith(n.trim().toLowerCase())}).map(function(e){return r.includes(e._id)?t.renderFriend(e):t.renderNonFriend(e)})}},{key:"renderFriend",value:function(e){return c.a.createElement("div",{className:"add-friend-suggestion add-friend-suggestion--friend","data-userId":e._id},c.a.createElement("i",{className:"fas fa-user"}),c.a.createElement("span",{className:"user-name"},e.userName))}},{key:"renderNonFriend",value:function(e){var t=this;return c.a.createElement("div",{className:"add-friend-suggestion",onClick:function(){return t.handleClick(e._id)}},c.a.createElement("i",{className:"fas fa-user-plus"}),c.a.createElement("span",{className:"user-name"},e.userName))}},{key:"handleChange",value:function(e){var t=e.target.value;this.setState(function(e){return Object(D.a)({},e,{query:t})})}},{key:"handleClick",value:function(e){var t=this.props.user;this.setState(function(e){return Object(D.a)({},e,{query:""})}),this.inputRef.current.value="",M.a.post("/api/user/friend/send",{id:e}).then(function(e){t.updateCredentials()}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this.state,t=e.users,a=e.query;return c.a.createElement("div",{className:"add-friends"},c.a.createElement("input",{ref:this.inputRef,className:"add-friends-input",placeholder:"Find new friends..",onChange:this.handleChange}),c.a.createElement("div",{className:"add-friends-dropdown"},a.length>=3&&this.filterUsers(t)))}}]),t}(n.Component)),me=function(e){function t(e){var a;Object(u.a)(this,t);var n=(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).props,c=n.id,r=n.update;return a.id=c,a.update=r,a.state={name:""},a.accept=a.accept.bind(Object(v.a)(Object(v.a)(a))),a.decline=a.decline.bind(Object(v.a)(Object(v.a)(a))),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;M.a.get("/api/user/name/".concat(this.id)).then(function(t){return e.setState({name:t.data})})}},{key:"accept",value:function(){var e=this;M.a.post("/api/user/friend/accept",{id:this.id}).then(function(){return e.update()}).catch(function(e){return console.log(e)})}},{key:"decline",value:function(){var e=this;M.a.post("/api/user/friend/decline",{id:this.id}).then(function(){return e.update()}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this.state.name;return c.a.createElement("div",null,c.a.createElement("h4",null,e),c.a.createElement(T.a,{variant:"contained",color:"primary",onClick:this.accept},"Accept"),c.a.createElement(T.a,{variant:"contained",color:"secondary",onClick:this.decline},"Decline"))}}]),t}(n.Component),fe=function(e){function t(e){var a;Object(u.a)(this,t);var n=(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).props.id;return a.id=n,a.state={name:"",collapsed:!0,attending:[]},a.toggleList=a.toggleList.bind(Object(v.a)(Object(v.a)(a))),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;M.a.get("/api/user/name/".concat(this.id)).then(function(t){return e.setState(function(e){return Object(D.a)({},e,{name:t.data})})}).catch(function(e){return console.log(e)}),M.a.get("/api/event/attending/".concat(this.id)).then(function(t){return e.setState(function(e){return Object(D.a)({},e,{attending:t.data})})}).catch(function(e){return console.log(e)})}},{key:"toggleList",value:function(){this.setState(function(e){return Object(D.a)({},e,{collapsed:!e.collapsed})})}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.collapsed,n=e.attending,r=this.props.user;return c.a.createElement("div",{className:"friends event-list ".concat(a&&"event-list--collapsed")},c.a.createElement("header",{className:"event-list-header",onClick:this.toggleList},c.a.createElement("h4",null,c.a.createElement("i",{className:"fas fa-user"}),t," (",n.length,")"),c.a.createElement("i",{className:"fas fa-angle-down"})),c.a.createElement("div",{className:"event-list-events"},!a&&n.map(function(e){return c.a.createElement(ue,{event:e,user:r,key:Math.round(Date.now()*Math.random())})})))}}]),t}(n.Component),pe=(a(1002),function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(z.Consumer,null,function(e){return c.a.createElement(de,{user:e})}),c.a.createElement(z.Consumer,null,function(e){return c.a.createElement(se,{title:"Friend Requests",length:e.credentials.friends.incoming.length},e.credentials.friends.incoming.map(function(t){return c.a.createElement(me,{id:t,update:e.updateCredentials,key:t})}))}),c.a.createElement(z.Consumer,null,function(e){return c.a.createElement(se,{title:"Friends List",length:e.credentials.friends.accepted.length},e.credentials.friends.accepted.map(function(t){return c.a.createElement(fe,{user:e,id:t,key:t})}))}))}),ve=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={events:{created:[],attending:[],invites:[]}},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;M.a.get("/api/event/myevents").then(function(t){return e.setState({events:t.data})})}},{key:"render",value:function(){var e=this.state.events,t=e.attending,a=e.created,n=e.invites;return c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"profile"},c.a.createElement("div",{className:"my-events"},c.a.createElement(z.Consumer,null,function(e){return c.a.createElement(se,{title:"Event invites",length:n.length},n.map(function(t){return c.a.createElement(ue,{event:t,user:e,key:Math.round(Date.now()*Math.random())})}))}),c.a.createElement(z.Consumer,null,function(e){return c.a.createElement(se,{title:"Created events",length:a.length},a.map(function(t){return c.a.createElement(ue,{event:t,user:e,key:Math.round(Date.now()*Math.random())})}))}),c.a.createElement(z.Consumer,null,function(e){return c.a.createElement(se,{title:"Upcoming events",length:t.length},t.map(function(t){return c.a.createElement(ue,{event:t,user:e,key:Math.round(Date.now()*Math.random())})}))})),c.a.createElement("div",{className:"my-friends"},c.a.createElement(pe,null))))}}]),t}(n.Component),he=(a(1004),function(e){var t=e.history;return c.a.createElement(G,{history:t},c.a.createElement(z.Consumer,null,function(e){return c.a.createElement(I,{history:t,login:e.login,logout:e.logout,isLoggedIn:e.isLoggedIn,userName:e.credentials.userName,navigate:function(e){return t.push(e)}})}),c.a.createElement("div",{className:"content-container"},c.a.createElement("div",{className:"background"}),c.a.createElement("div",{className:"content"},c.a.createElement(o.a,null,c.a.createElement(s.a,{exact:!0,path:"/",component:H}),c.a.createElement(s.a,{exact:!0,path:"/create",component:oe}),c.a.createElement(s.a,{exact:!0,path:"/myevents",component:ve}),c.a.createElement(s.a,{path:"*",render:function(){return c.a.createElement("h1",null,"404")}})))))}),be=function(){return c.a.createElement(i.a,null,c.a.createElement(o.a,null,c.a.createElement(s.a,{path:"/",component:he})))};l.a.render(c.a.createElement(be,null),document.getElementById("root"))},230:function(e,t){e.exports={placesAppId:"pl2CDGXIZBMP",placesAppKey:"ef2ac9d2245d3ab744c352d699c54768"}},457:function(e,t,a){e.exports=a(1007)},462:function(e,t,a){},465:function(e,t,a){},485:function(e,t,a){},567:function(e,t,a){},816:function(e,t,a){},818:function(e,t,a){},820:function(e,t,a){},822:function(e,t,a){},873:function(e,t,a){},875:function(e,t,a){},886:function(e,t){},888:function(e,t){},922:function(e,t){},923:function(e,t){},996:function(e,t,a){},998:function(e,t,a){}},[[457,2,1]]]);
//# sourceMappingURL=main.ee42c6ee.chunk.js.map